<div class="min-h-screen bg-gray-50">
  <!-- Header -->
  <div class="bg-white border-b border-gray-200 sticky top-0 z-40">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="text-3xl font-bold text-gray-900">Admin Dashboard</h1>
          <p class="text-gray-600 mt-1">Manage users, reports, and platform settings</p>
        </div>
        <div class="flex items-center gap-3">
          <svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
          </svg>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading()" class="flex justify-center py-12">
    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div>
  </div>

  <div *ngIf="!isLoading()" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <!-- Statistics Cards -->
    <div class="grid md:grid-cols-4 gap-6 mb-12">
      <!-- Total Users -->
      <div class="bg-white rounded-lg shadow-md p-6">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-gray-600 text-sm font-medium">Total Users</p>
            <p class="text-3xl font-bold text-gray-900 mt-2">{{ totalUsers() }}</p>
          </div>
          <svg class="w-12 h-12 text-blue-100" fill="currentColor" viewBox="0 0 20 20">
            <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM9 12a6 6 0 11-12 0 6 6 0 0112 0z"></path>
          </svg>
        </div>
      </div>

      <!-- Active Users -->
      <div class="bg-white rounded-lg shadow-md p-6">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-gray-600 text-sm font-medium">Active Users</p>
            <p class="text-3xl font-bold text-gray-900 mt-2">{{ activeUsers() }}</p>
          </div>
          <svg class="w-12 h-12 text-green-100" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path>
          </svg>
        </div>
      </div>

      <!-- Total Swaps -->
      <div class="bg-white rounded-lg shadow-md p-6">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-gray-600 text-sm font-medium">Total Swaps</p>
            <p class="text-3xl font-bold text-gray-900 mt-2">{{ totalSwaps() }}</p>
          </div>
          <svg class="w-12 h-12 text-purple-100" fill="currentColor" viewBox="0 0 20 20">
            <path d="M7.707 6.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0zm6 0a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414zM17 11a1 1 0 100-2h-1V9a4 4 0 00-8 0v.001h-1a1 1 0 100 2h.001V9a6 6 0 0112 0v2h1z"></path>
          </svg>
        </div>
      </div>

      <!-- Banned Users -->
      <div class="bg-white rounded-lg shadow-md p-6">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-gray-600 text-sm font-medium">Banned Users</p>
            <p class="text-3xl font-bold text-red-600 mt-2">{{ bannedUsers().length }}</p>
          </div>
          <svg class="w-12 h-12 text-red-100" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M13.477 14.89A6 6 0 015.11 2.697a6 6 0 008.367 12.193z" clip-rule="evenodd"></path>
          </svg>
        </div>
      </div>
    </div>

    <!-- Tab Navigation -->
    <div class="flex gap-4 mb-8 border-b border-gray-200 bg-white p-4 rounded-lg">
      <button
        (click)="activeTab.set('overview')"
        [class.border-b-2]="activeTab() === 'overview'"
        [class.border-indigo-600]="activeTab() === 'overview'"
        [class.text-indigo-600]="activeTab() === 'overview'"
        [class.text-gray-600]="activeTab() !== 'overview'"
        class="px-4 py-3 font-medium transition"
      >
        Overview
      </button>
      <button
        (click)="activeTab.set('users')"
        [class.border-b-2]="activeTab() === 'users'"
        [class.border-indigo-600]="activeTab() === 'users'"
        [class.text-indigo-600]="activeTab() === 'users'"
        [class.text-gray-600]="activeTab() !== 'users'"
        class="px-4 py-3 font-medium transition"
      >
        All Users
      </button>
      <button
        (click)="activeTab.set('banned')"
        [class.border-b-2]="activeTab() === 'banned'"
        [class.border-indigo-600]="activeTab() === 'banned'"
        [class.text-indigo-600]="activeTab() === 'banned'"
        [class.text-gray-600]="activeTab() !== 'banned'"
        class="px-4 py-3 font-medium transition"
      >
        Banned Users
      </button>
      <button
        (click)="activeTab.set('reports')"
        [class.border-b-2]="activeTab() === 'reports'"
        [class.border-indigo-600]="activeTab() === 'reports'"
        [class.text-indigo-600]="activeTab() === 'reports'"
        [class.text-gray-600]="activeTab() !== 'reports'"
        class="px-4 py-3 font-medium transition"
      >
        Reports
      </button>
    </div>

    <!-- Overview Tab -->
    <div *ngIf="activeTab() === 'overview'" class="grid md:grid-cols-2 gap-8">
      <div class="bg-white rounded-lg shadow-md p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Platform Stats</h3>
        <div class="space-y-4">
          <div class="flex items-center justify-between">
            <span class="text-gray-600">Average User Rating</span>
            <span class="font-bold text-gray-900">4.2/5 ‚≠ê</span>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-gray-600">Active Sessions</span>
            <span class="font-bold text-gray-900">24</span>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-gray-600">Messages Today</span>
            <span class="font-bold text-gray-900">1,234</span>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-gray-600">New Users (Today)</span>
            <span class="font-bold text-gray-900">12</span>
          </div>
        </div>
      </div>

      <div class="bg-white rounded-lg shadow-md p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Recent Activity</h3>
        <div class="space-y-4 text-sm">
          <p class="text-gray-600">‚úÖ 15 new matches created</p>
          <p class="text-gray-600">üí¨ 234 messages exchanged</p>
          <p class="text-gray-600">‚≠ê 28 new reviews submitted</p>
          <p class="text-gray-600">üîÑ 8 swaps completed</p>
        </div>
      </div>
    </div>

    <!-- Users Tab -->
    <div *ngIf="activeTab() === 'users'" class="bg-white rounded-lg shadow-md overflow-hidden">
      <!-- Search Bar -->
      <div class="p-6 border-b border-gray-200">
        <input
          type="text"
          placeholder="Search users by name or email..."
          (input)="searchUsers($event.target.value)"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-600"
        />
      </div>

      <!-- Users Table -->
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead class="bg-gray-50 border-b border-gray-200">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Name</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Email</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Rating</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Swaps</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Joined</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of getDisplayedUsers()" class="border-b border-gray-200 hover:bg-gray-50 transition">
              <td class="px-6 py-4">
                <p class="font-medium text-gray-900">{{ user.name }}</p>
              </td>
              <td class="px-6 py-4">
                <p class="text-gray-600 text-sm">{{ user.email }}</p>
              </td>
              <td class="px-6 py-4">
                <div class="flex items-center gap-1">
                  <span class="font-bold">{{ user.averageRating.toFixed(1) }}</span>
                  <span class="text-yellow-400">‚≠ê</span>
                </div>
              </td>
              <td class="px-6 py-4">
                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800">
                  {{ user.totalSwapsCompleted }}
                </span>
              </td>
              <td class="px-6 py-4 text-sm text-gray-600">
                {{ formatDate(user.createdAt) }}
              </td>
              <td class="px-6 py-4">
                <button
                  (click)="banUser(user)"
                  *ngIf="!user.isBanned"
                  class="text-red-600 hover:text-red-700 font-medium text-sm"
                >
                  Ban
                </button>
                <button
                  (click)="unbanUser(user)"
                  *ngIf="user.isBanned"
                  class="text-green-600 hover:text-green-700 font-medium text-sm"
                >
                  Unban
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- No Results -->
      <div *ngIf="getDisplayedUsers().length === 0" class="p-8 text-center">
        <p class="text-gray-500">No users found</p>
      </div>
    </div>

    <!-- Banned Users Tab -->
    <div *ngIf="activeTab() === 'banned'" class="bg-white rounded-lg shadow-md overflow-hidden">
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead class="bg-gray-50 border-b border-gray-200">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Name</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Email</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Reason</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of getDisplayedUsers()" class="border-b border-gray-200 hover:bg-gray-50">
              <td class="px-6 py-4">
                <p class="font-medium text-gray-900">{{ user.name }}</p>
              </td>
              <td class="px-6 py-4">
                <p class="text-gray-600 text-sm">{{ user.email }}</p>
              </td>
              <td class="px-6 py-4">
                <p class="text-red-600 text-sm">{{ user.bannedReason || 'No reason provided' }}</p>
              </td>
              <td class="px-6 py-4">
                <button
                  (click)="unbanUser(user)"
                  class="text-green-600 hover:text-green-700 font-medium text-sm"
                >
                  Unban
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div *ngIf="getDisplayedUsers().length === 0" class="p-8 text-center">
        <p class="text-gray-500">No banned users</p>
      </div>
    </div>

    <!-- Reports Tab -->
    <div *ngIf="activeTab() === 'reports'" class="bg-white rounded-lg shadow-md p-8">
      <div class="text-center py-12">
        <svg class="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <p class="text-gray-500 text-lg">Reports system coming soon</p>
        <p class="text-gray-400 text-sm mt-2">User reports will be displayed here</p>
      </div>
    </div>
  </div>
</div>
